<!DOCTYPE html>
<html>
<head>
  <title>Chums donate dapp</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;800&display=swap" rel="stylesheet">

  <style>
  .app--page-loader {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100vw;
    height: 100vh;
  }
  .v-enter-active,
  .v-leave-active {
    transition: opacity 0.5s ease;
  }

  .v-enter-from,
  .v-leave-to {
    opacity: 0;
  }
  /* http://meyerweb.com/eric/tools/css/reset/ 
    v2.0 | 20110126
    License: none (public domain)
  */
  
  html, body, div, span, applet, object, iframe,
  h1, h2, h3, h4, h5, h6, p, blockquote, pre,
  a, abbr, acronym, address, big, cite, code,
  del, dfn, em, img, ins, kbd, q, s, samp,
  small, strike, strong, sub, sup, tt, var,
  b, u, i, center,
  dl, dt, dd, ol, ul, li,
  fieldset, form, label, legend,
  table, caption, tbody, tfoot, thead, tr, th, td,
  article, aside, canvas, details, embed, 
  figure, figcaption, footer, header, hgroup, 
  menu, nav, output, ruby, section, summary,
  time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
  }
  /* HTML5 display-role reset for older browsers */
  article, aside, details, figcaption, figure, 
  footer, header, hgroup, menu, nav, section {
    display: block;
  }
  body {
    font-family: 'Inter', sans-serif;
    line-height: 1;
    background-color: var(--bg-page);
    padding: 20px 0 60px 0;
  }
  ol, ul {
    list-style: none;
  }
  blockquote, q {
    quotes: none;
  }
  blockquote:before, blockquote:after,
  q:before, q:after {
    content: '';
    content: none;
  }
  table {
    border-collapse: collapse;
    border-spacing: 0;
  }

  * {
    box-sizing: border-box;
    color: var(--white);
  }

  .container {
    width: 100%;
    max-width: 1240px;
    padding: 0 20px;
    margin: 0 auto;
  }

  :root {
    --bg-page: rgb(6, 6, 6);
    --accent: rgb(119, 90, 255);
    --error: rgb(217, 33, 33);

    /* // base */
    --white: rgb(255, 255, 255);
    --black: rgb(0, 0, 0);
  }

  .col {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
  }

  .row {
    display: flex;
    justify-content: space-between;
  }
  
  .button {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 15px 20px;
    border-radius: 16px;
    font-weight: 700;
    font-size: 16px;
    background-color: var(--accent);
    color: #fff;
    border: none;
    cursor: pointer;
    width: 100%;
    margin-top: 40px;
    transition: transform .2s ease;
  }

  .button small, .button .small {
    font-size: 14px;
  }

  .button span {
    text-align: left;
  }

  .button--error {
    background-color: var(--error);
  }

  .button--logout {
    margin-top: 20px;
    opacity: .9;
  }

  .button:active {
    transform: scale(0.95)
  }

  .button:hover {
    opacity: .8;
  }

  .button:disabled {
    opacity: .6;
    pointer-events: none;
  }

  .main-block {
    display: flex;
  }

  .app__wallet {
    display: flex;
    justify-content: space-between;
    padding-bottom: 24px;
    border-bottom: 1px solid #292929;
  }

  .app__wallet img {
    width: 56px;
    height: 32px;
  }

  .app__block {
    margin-bottom: 32px;
  }

  .app__block:last-child {
    margin-bottom: 0;
  }

  .app__title {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 20px;
  }

  .app__text {
    font-size: 20px;
  }

  .col__balance {
    color: #797979;
  }

  .link {
    width: fit-content;
    display: block;
    color: var(--accent);
    margin-bottom: 20px;
  }

  .link:hover {
    opacity: .8;
  }

  .donate-wrap__amount {
    font-size: 40px;
    margin: 30px 0;
    text-align: center;
  }

  .donate-wrap__options {
    display: flex;
    width: 100%;
    justify-content: space-between;
    margin: 24px 0 40px 0;
    gap: 2px;
  }

  .donate-wrap__options-item {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 4px 7px;
    border-radius: 12px;
    border: 1px solid var(--accent);
    color: var(--accent);
    font-size: 14px;
    cursor: pointer;
  }

  .item--active {
    background-color: var(--accent);
    color: var(--white);
  }

  .loader {
    min-width: 24px;
    min-height: 24px;
    border: 3px solid #FFF;
    border-bottom-color: rgba(255, 255, 255, .5);
    border-radius: 50%;
    display: inline-block;
    box-sizing: border-box;
    animation: rotation 1s linear infinite;
  }

  .donate-wrap__input {
    width: 100%;
    background-color: #060606;
    border: 1px solid #2C2C2C;
    padding: 14px 12px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
  }

  .donate-wrap__input:focus {
    outline: none;
  }

  .donate-wrap__input::placeholder {
    color: #797979;
  }

  @keyframes rotation {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
  } 
  @keyframes rotate {
    0%   {transform: rotate(0deg)}
    100%   {transform: rotate(360deg)}
  }

  @keyframes prixClipFix {
      0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}
      50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
      75%, 100%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
  }

  .slide-fade-enter-active {
    transition: all 0.2s ease-out;
  }

  .slide-fade-leave-active {
    transition: all 0.15s cubic-bezier(1, 0.5, 0.8, 1);
  }

  .slide-fade-enter-from,
  .slide-fade-leave-to {
    transform: translateX(-20px);
    opacity: 0;
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }

  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
      -webkit-appearance: none;
  }
  </style>
</head>

<body>
  <div id="app">
    <Transition>
      <div class="app--page-loader" v-if="pageLoading">
        <span class="loader"></span>
      </div>
    </Transition>
    <section class="section">
      <div class="container">
        <div class="app__block">
          <h1 class="app__title">Support Our Work on Chums üöÄ</h1>
          <p class="app__text">
            Chums is built by a small team dedicated to integrating secure messaging with web3 technologies. We aim to make digital communication more accessible and connected to the decentralized world. üåê
          </p>
        </div>
        <div class="app__block">
          <h1 class="app__title">‚ù§Ô∏è Every Donation Counts</h1>
          <p class="app__text">
            Your support helps us move faster and improve our platform. With a tight-knit team, each contribution has a big impact. üí™
          </p>
        </div>
        <div v-if="walletData?.address" class="app__wallet">
          <img src="data:image/png;base64,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"/>
          <div class="col">
            <div>
              {{ cutString(walletData?.address, 6, 4) }}
            </div>
            <div class="col__balance">
              Balance: {{ walletData?.balance }} EVER
            </div>
          </div>
        </div>

        <Transition name="slide-fade">
          <div v-if="walletData?.address" class="donate-wrap">
            <div class="donate-wrap__options">
              <div
                class="donate-wrap__options-item"
                v-for="item in fastOptions"
                v-bind:class="{ 'item--active': donateFast === item }"
                :key="item"
                @click="handleFastOption(item)"
              >
                {{ item }}
  
                {{ Number(item) > 0 ? "EVER" : "" }}
              </div>
            </div>

            <Transition name="slide-fade">
              <input
                v-if="donateFast === 'OTHER'"
                v-model="inputDonate"
                placeholder="Enter an amount"
                class="donate-wrap__input"
                type="number"
              />
            </Transition>
          </div>
        </Transition>

        <button v-if="!walletData.address" class="button" @click="initPermission()">
          Connect Wallet
        </button>

        <button v-else-if="txResult" class="button" @click="clearTx()">
          <svg class="success-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="24" height="24" rx="12" fill="#DDDDDD" fill-opacity="0.4"/>
            <mask id="mask0_436_255" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="7" y="7" width="10" height="10">
            <path d="M8 11.5L11 15.5L16 8.5" stroke="#0D0D0D" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
            </mask>
            <g mask="url(#mask0_436_255)">
            <path d="M18 6H6V18H18V6Z" fill="white"/>
            </g>
          </svg>

          <span>
            <small>
              Thank you for any support you can offer. It means a lot to us üíï
            </small>
          </span>
        </button>

        <button v-else-if="isError" class="button" :class="{ 'button--error': isError }" @click="clearTx()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="24" height="24" rx="12" fill="#DDDDDD" fill-opacity="0.4"/>
            <mask id="mask0_436_238" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="6" y="6" width="12" height="12">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12ZM10.6325 9.89737L11.6444 12.9333C11.7583 13.275 12.2417 13.275 12.3556 12.9333L13.3675 9.89737C13.6787 8.96394 12.9839 8 12 8C11.0161 8 10.3213 8.96394 10.6325 9.89737ZM11.9938 16C12.5461 16 12.9938 15.5523 12.9938 15C12.9938 14.4477 12.5461 14 11.9938 14C11.4416 14 10.9938 14.4477 10.9938 15C10.9938 15.5523 11.4416 16 11.9938 16Z" fill="#0D0D0D"/>
            </mask>
            <g mask="url(#mask0_436_238)">
            <path d="M18 6H6V18H18V6Z" fill="white"/>
            </g>
          </svg>

          <span>
            <small>
              Error. Please try again üôè
            </small>
          </span>
        </button>

        <button
          v-else-if="walletData.address"
          class="button"
          @click="triggerDonate()"
          :disabled="pendingTx || isNoValue"
        >
          <span v-if="pendingTx" class="loader"></span>
          <span :class="{ small: pendingTx }">{{ !pendingTx ?  'Donate Now' : 'We are waiting for your support üòá'}}</span>
        </button>

        <button v-if="walletData.address" class="button button--logout" @click="triggerLogout()">
          Logout
        </button>

      </div>
    </section>
  </div>
  <script type="module">
    import { createApp, ref, watch } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js';

    var EverscaleProvider=function(t){"use strict";class e{constructor(t){this.equals=t=>this._equals(t),this._address=t}toString(){return this._address}toJSON(){return this._address}_equals(t){return"string"==typeof t?this._address===t:this._address===(null==t?void 0:t._address)}}function s(t){return null!=t&&(t instanceof e||Object.getPrototypeOf(t).constructor.name===e.prototype.constructor.name)}class i extends Error{constructor(t,e){super("Message expired"),this.address=t,this.hash=e}}class n{constructor(){this.transactions=new Map}async waitTransaction(t,e){var s;let n=null===(s=this.transactions.get(e))||void 0===s?void 0:s.promise;if(null==n){let t,s;n=new Promise(((e,i)=>{t=t=>e(t),s=()=>i()})),this.transactions.set(e,{promise:n,resolve:t,reject:s})}const a=await n;if(null==a)throw new i(t,e);return a}fillTransaction(t,e){const s=this.transactions.get(t);null!=s?s.resolve(e):this.transactions.set(t,{promise:Promise.resolve(e),resolve:()=>{},reject:()=>{}})}}class a{constructor(t){this.tasks=[],this.sched=()=>{var t;this.count>0&&this.tasks.length>0&&(this.count--,null===(t=this.tasks.shift())||void 0===t||t())},this.count=t}acquire(){return new Promise(((t,e)=>{this.tasks.push((()=>{let e=!1;t((()=>{e||(e=!0,this.count++,this.sched())}))})),o(this.sched)}))}releaseAll(){for(var t;this.tasks.length>0;)null===(t=this.tasks.shift())||void 0===t||t()}}function r(t){const e=document.createTextNode("");let s,i,n=0,a=0;return new t((function(){let t;if(s)i&&(s=i.slice(a).concat(s));else{if(!i)return;s=i}if(i=s,s=null,a=0,"function"==typeof i)return t=i,i=null,void t();for(e.data=n=++n%2;a<i.length;)t=i[a],a++,a===i.length&&(i=null),t()})).observe(e,{characterData:!0}),function(t){s?"function"==typeof s?s=[s,t]:s.push(t):(s=t,e.data=n=++n%2)}}const o=function(){if("function"==typeof queueMicrotask)return queueMicrotask;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return r(MutationObserver);if("function"==typeof window.WebKitMutationObserver)return r(window.WebKitMutationObserver)}if("function"==typeof setImmediate)return setImmediate;if("function"==typeof setTimeout||"object"==typeof setTimeout)return function(t){setTimeout(t,0)};throw new Error("No `nextTick` implementation found")}(),c=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});const u=4294967295;let d=Math.floor(Math.random()*u);function l(){return d=(d+1)%u,d}function h(t){return{id:{hash:t.id.hash,lt:t.id.lt},prevTransactionId:null!=t.prevTransactionId?{hash:t.prevTransactionId.hash,lt:t.prevTransactionId.lt}:void 0,createdAt:t.createdAt,aborted:t.aborted,exitCode:t.exitCode,resultCode:t.resultCode,origStatus:t.origStatus,endStatus:t.endStatus,totalFees:t.totalFees,inMessage:m(t.inMessage),outMessages:t.outMessages.map(m)}}function p(t){return{...t,inMessage:w(t.inMessage),outMessages:t.outMessages.map(w)}}function m(t){return{hash:t.hash,src:t.src?t.src.toString():void 0,dst:t.dst?t.dst.toString():void 0,value:t.value,bounce:t.bounce,bounced:t.bounced,body:t.body,bodyHash:t.bodyHash}}function w(t){return{...t,src:t.src?new e(t.src):void 0,dst:t.dst?new e(t.dst):void 0}}function b(t){return{...t,accountInteraction:t.accountInteraction?f(t.accountInteraction):void 0}}function f(t){return{...t,address:new e(t.address)}}function v(t){return y(t)}function y(t){if("object"==typeof t&&s(t))return t.toString();if(Array.isArray(t)){const e=[];for(const s of t)e.push(y(s));return e}if(null!=t&&"object"==typeof t){const e={};for(const[s,i]of Object.entries(t))e[s]=y(i);return e}return t}function g(t,e){const s={};for(const i of t)s[i.name]=P(i,e[i.name]);return s}function _(t,e){const s={};for(const i of t)Object.prototype.hasOwnProperty.call(e,i.name)&&(s[i.name]=P(i,!e[i.name]));return s}function P(t,s){if(t.type.startsWith("map")){const e=t.type.indexOf(","),i=t.type.slice(4,e),n=t.type.slice(e+1,-1),a=[];for(const[e,r]of s)a.push([P({name:"",type:i},e),P({name:"",type:n,components:t.components},r)]);return a}{const i=t.type.endsWith("[]"),n=!i&&t.type.startsWith("optional"),a=i?t.type.slice(0,-2):n?t.type.slice(9,-1):t.type;if(i){const e={name:t.name,type:a,components:t.components},i=[];for(const t of s)i.push(P(e,t));return i}if(n){if(null==s)return null;return P({name:t.name,type:a,components:t.components},s)}if("tuple"===a){const e={};if(null!=t.components)for(const i of t.components)e[i.name]=P(i,s[i.name]);return e}return"address"===a?new e(s):s}}class S{constructor(t){this.provider=t,this.subscriptions=new Map,this.scanners=new Map,this.unsubscribe=async()=>this._unsubscribe()}transactions(t){return this._addSubscription("transactionsFound",t,!1)}trace(t){const e=l();return new x(((s,i)=>{const n=new A(this.provider,{origin:t,onData:s,onEnd:t=>{this.scanners.delete(e),i(t)}});return this.scanners.set(e,n),n.start(),Promise.resolve()}),(async()=>{const t=this.scanners.get(e);null!=t&&(this.scanners.delete(e),await t.stop())}),I,!0)}oldTransactions(t,e){const s=l();return new x(((i,n)=>{const a=new k(this.provider,{address:t,onData:i,onEnd:t=>{this.scanners.delete(s),n(t)},...e});return this.scanners.set(s,a),a.start(),Promise.resolve()}),(async()=>{const t=this.scanners.get(s);null!=t&&(this.scanners.delete(s),await t.stop())}),I,!0)}states(t){return this._addSubscription("contractStateChanged",t,!1)}async _unsubscribe(){const t=[];for(const e of this.subscriptions.values())for(const[s,i]of Object.entries(e))delete e[s],null!=i&&t.push(i.subscription.then((t=>t.unsubscribe())).catch((()=>{})));this.subscriptions.clear();for(const e of this.scanners.values())t.push(e.stop());this.scanners.clear(),await Promise.all(t)}_addSubscription(t,e,s){const i=e.toString(),n=e=>{const s=this.subscriptions.get(i);if(null==s)return;const n=s[t];if(null!=n){const i=n.handlers.get(e);if(null!=i){n.handlers.delete(e);const{queue:t,onEnd:s,state:a}=i;a.finished||(a.finished=!0,t.clear(),t.enqueue((async()=>s(a.eof))))}if(0===n.handlers.size){const e=n.subscription;delete s[t],e.then((t=>t.unsubscribe())).catch(console.debug)}}null==s.contractStateChanged&&null==s.transactionsFound&&this.subscriptions.delete(i)},a=l();return new x(((s,r)=>{const o=this.subscriptions.get(i);let c=null==o?void 0:o[t];const u={onData:s,onEnd:r,queue:new T,state:{eof:!1,finished:!1}};if(null!=c)return c.handlers.set(a,u),Promise.resolve();const d=new Map;d.set(a,u);const l=this.provider.subscribe(t,{address:e}).then((t=>(t.on("data",(t=>{for(const{onData:e,queue:s,state:i}of d.values())i.eof||i.finished||s.enqueue((async()=>{await e(t)||(i.eof=!0,n(a))}))})),t.on("unsubscribed",(()=>{for(const t of d.keys())n(t)})),t))).catch((t=>{console.error(t);for(const t of d.keys())n(t);throw t}));return c={subscription:l,handlers:d},null==o?this.subscriptions.set(i,{[t]:c}):o[t]=c,l.then((()=>{}))}),(()=>n(a)),I,s)}}async function I(t,e){return e(t)}class x{constructor(t,e,s,i){this.makeProducer=t,this.stopProducer=e,this.extractor=s,this.isFinite=i,this.fold=this.onlyFinite(((t,e,s)=>{let i=t;return new Promise(((t,n)=>{const a=this.makeProducer((t=>this.extractor(t,(async t=>(i=await e(i,t),!0)))),(e=>{e?t(i):n(new Error("Subscription closed"))}));null!=s&&(s.subscribed=a)}))})),this.finished=this.onlyFinite((t=>new Promise(((e,s)=>{const i=this.makeProducer((t=>this.extractor(t,(t=>!0))),(t=>{t?e(void 0):s(new Error("Subscription closed"))}));null!=t&&(t.subscribed=i)}))))}async delayed(t){const{subscribed:e,result:s}=t({first:()=>{const t={},e=this.first(t);return{subscribed:t.subscribed,result:e}},on:t=>{const e={};return this.on(t,e),{subscribed:e.subscribed,result:void 0}},fold:null!=this.fold?(t,e)=>{const s={},i=this.fold(t,e,s);return{subscribed:s.subscribed,result:i}}:void 0,finished:null!=this.finished?()=>{const t={},e=this.finished(t);return{subscribed:t.subscribed,result:e}}:void 0});return await e,()=>s}first(t){const e={found:!1};return new Promise(((s,i)=>{const n=this.makeProducer((t=>this.extractor(t,(t=>(Object.assign(e,{found:!0,result:t}),!1)))),(t=>{t?this.isFinite?s(e.found?e.result:void 0):e.found?s(e.result):i(new Error("Unexpected end of stream")):i(new Error("Subscription closed"))}));null!=t&&(t.subscribed=n)}))}on(t,e){const s=this.makeProducer((e=>this.extractor(e,(async e=>(await t(e),!0)))),(t=>{}));null!=e&&(e.subscribed=s)}merge(t){return new x(((e,s)=>{const i={stopped:!1,counter:0},n=t=>{i.stopped||2!=++i.counter&&t||(i.stopped=!0,s(t))};return Promise.all([this.makeProducer(e,n),t.makeProducer(e,n)]).then((()=>{}))}),(()=>{this.stopProducer(),t.stopProducer()}),this.extractor,this.isFinite&&t.isFinite)}enumerate(){const t={index:0};return new x(this.makeProducer,this.stopProducer,((e,s)=>this.extractor(e,(async e=>s({index:t.index++,item:e})))),this.isFinite)}tap(t){return new x(this.makeProducer,this.stopProducer,((e,s)=>this.extractor(e,(async e=>(await t(e),s(e))))),this.isFinite)}filter(t){return new x(this.makeProducer,this.stopProducer,((e,s)=>this.extractor(e,(async e=>!await t(e)||s(e)))),this.isFinite)}filterMap(t){return new x(this.makeProducer,this.stopProducer,((e,s)=>this.extractor(e,(async e=>{const i=await t(e);return void 0===i||s(i)}))),this.isFinite)}map(t){return new x(this.makeProducer,this.stopProducer,((e,s)=>this.extractor(e,(async e=>{const i=await t(e);return s(i)}))),this.isFinite)}flatMap(t){return new x(this.makeProducer,this.stopProducer,((e,s)=>this.extractor(e,(async e=>{const i=await t(e);for(const t of i)if(!await s(t))return!1;return!0}))),this.isFinite)}skip(t){const e={index:0};return new x(this.makeProducer,this.stopProducer,((s,i)=>this.extractor(s,(s=>e.index>=t?i(s):(++e.index,!0)))),this.isFinite)}skipWhile(t){const e={shouldSkip:!0};return new x(this.makeProducer,this.stopProducer,((s,i)=>this.extractor(s,(async s=>!(!e.shouldSkip||!await t(s))||(e.shouldSkip=!1,i(s))))),this.isFinite)}take(t){const e={index:0};return new x(this.makeProducer,this.stopProducer,((s,i)=>this.extractor(s,(s=>e.index<t&&(++e.index,i(s))))),!0)}takeWhile(t){return new x(this.makeProducer,this.stopProducer,((e,s)=>this.extractor(e,(async e=>!!await t(e)&&s(e)))),!0)}takeWhileMap(t){return new x(this.makeProducer,this.stopProducer,((e,s)=>this.extractor(e,(async e=>{const i=await t(e);return void 0!==i&&s(i)}))),!0)}onlyFinite(t){return this.isFinite?t:void 0}}class k{constructor(t,e){this.provider=t,this.params=e,this.queue=new T,this.isRunning=!1}start(){this.isRunning||null!=this.promise||(this.isRunning=!0,this.promise=(async()=>{const t=this.params,e={complete:!1};for(;this.isRunning&&!e.complete;)try{const{transactions:s,continuation:i}=await this.provider.getTransactions({address:this.params.address,continuation:this.continuation});if(e.complete=!e.complete&&null==s.length,!this.isRunning||e.complete)break;const n=s.filter((e=>(null==t.fromLt||c.compare(e.id.lt,t.fromLt)>0)&&(null==t.fromUtime||e.createdAt>t.fromUtime)));if(0==n.length){e.complete=!0;break}const a={maxLt:n[0].id.lt,minLt:n[n.length-1].id.lt,batchType:"old"};if(this.queue.enqueue((async()=>{await this.params.onData({address:this.params.address,transactions:n,info:a})||(e.complete=!0,this.isRunning=!1)})),null==i){e.complete=!0;break}this.continuation=i}catch(t){console.error(t)}this.queue.enqueue((async()=>this.params.onEnd(e.complete))),this.isRunning=!1,this.continuation=void 0})())}async stop(){this.isRunning=!1,this.queue.clear(),null!=this.promise?await this.promise:this.params.onEnd(!1)}}class A{constructor(t,e){this.provider=t,this.params=e,this.queue=new T,this.isRunning=!1,this.semaphore=new a(10)}start(){if(this.isRunning||null!=this.promise)return;const t=this.provider;this.isRunning=!0,this.promise=(async()=>{const e={complete:!1},s=e=>{const s={stopped:!1};return{promise:(async()=>{let i=500;for(;;){const n=await this.semaphore.acquire();if(s.stopped)return void n();const a=await t.rawApi.findTransaction({inMessageHash:e}).catch((()=>({transaction:void 0}))).finally((()=>n()));if(s.stopped)return;if(null!=a.transaction){const t=p(a.transaction);return t.account=t.inMessage.dst,t}let r;const o=new Promise(((t,e)=>{r=()=>t(),s.reject=()=>e()}));if(s.timeout=setTimeout(r,i),await o,s.stopped)return;s.reject=void 0,i=Math.min(2*i,3e3)}})(),reject:()=>{var t;s.stopped=!0,null===(t=s.reject)||void 0===t||t.call(s),null!=s.timeout&&clearTimeout(s.timeout)}}},i=[this.params.origin];try{t:for(;this.isRunning;){const t=i.shift();if(null==t){e.complete=!0;break}const n=t.outMessages.filter((t=>null!=t.dst)).map((t=>{const e=t.hash;return s(e)}));this.pendingTransactions=n;for(const{promise:t}of n){const s=await t;if(!this.isRunning||e.complete||null==s)break t;this.queue.enqueue((async()=>{await this.params.onData(s)||(e.complete=!0,this.isRunning=!1,this.rejectPendingTransactions())})),i.push(s)}this.pendingTransactions=void 0}}catch(t){console.error(t)}finally{this.queue.enqueue((async()=>this.params.onEnd(e.complete))),this.isRunning=!1,this.rejectPendingTransactions()}})()}async stop(){this.isRunning=!1,this.queue.clear(),this.rejectPendingTransactions(),null!=this.promise?await this.promise:this.params.onEnd(!1)}rejectPendingTransactions(){if(null!=this.pendingTransactions){for(const t of this.pendingTransactions)t.reject();this.pendingTransactions=void 0}this.semaphore.releaseAll()}}class T{constructor(){this.queue=[],this.workingOnPromise=!1}enqueue(t){this.queue.push(t),this._dequeue().catch((()=>{}))}clear(){this.queue.length=0}async _dequeue(){if(this.workingOnPromise)return;const t=this.queue.shift();t&&(this.workingOnPromise=!0,t().then((()=>{this.workingOnPromise=!1,this._dequeue()})).catch((()=>{this.workingOnPromise=!1,this._dequeue()})))}}class E{constructor(t,e,s){if(!Array.isArray(e.functions))throw new Error("Invalid abi. Functions array required");if(!Array.isArray(e.events))throw new Error("Invalid abi. Events array required");this._provider=t,this._abi=JSON.stringify(e),this.methodsAbi=e.functions.reduce(((t,e)=>(null==e.inputs&&(e.inputs=[]),null==e.outputs&&(e.outputs=[]),t[e.name]=e,t)),{}),this.eventsAbi=e.events.reduce(((t,e)=>(null==e.inputs&&(e.inputs=[]),t[e.name]=e,t)),{}),this.fieldsAbi=e.fields,this._address=s,this._methods=new Proxy({},{get:(t,e)=>{const s=this.methodsAbi[e];return(t={})=>new z(this._provider,s,this._abi,this._address,e,t)}}),this._fields=new Proxy({},{get:(t,e)=>async(t={})=>{await this._provider.ensureInitialized();const{fields:s,state:i}=await this._provider.rawApi.getContractFields({address:this._address.toString(),abi:this._abi,cachedState:null==t?void 0:t.cachedState,allowPartial:null!=(null==t?void 0:t.allowPartial)&&t.allowPartial});if(null==s)throw null==i?new Error("Account does not exist"):i.isDeployed?new Error("Invalid account data"):new Error("Account is not deployed");const n=g(this.fieldsAbi,s);if(null==n||!Object.prototype.hasOwnProperty.call(n,e))throw new Error("Unknown field");return n[e]}})}get methods(){return this._methods}get fields(){return this._fields}get address(){return this._address}get abi(){return this._abi}async getFullState(){return await this._provider.ensureInitialized(),await this._provider.rawApi.getFullContractState({address:this.address.toString()})}async getFields(t={}){await this._provider.ensureInitialized();const{fields:e,state:s}=await this._provider.rawApi.getContractFields({address:this.address.toString(),abi:this._abi,cachedState:t.cachedState,allowPartial:null!=t.allowPartial&&t.allowPartial});return{fields:null!=e?g(this.fieldsAbi,e):void 0,state:s}}transactions(t){return t.transactions(this._address).flatMap((({transactions:t})=>t))}events(t){return t.transactions(this._address).flatMap((({transactions:t})=>t)).flatMap((t=>this.decodeTransactionEvents({transaction:t}).then((e=>(e.forEach((e=>e.transaction=t)),e)))))}async waitForEvent(t={}){const{range:e,filter:s}=t,i="string"==typeof s?({event:t})=>t===s:s;let n=t.subscriber;const a=null==n;null==n&&(n=new this._provider.Subscriber);const r=await(null!=(null==e?void 0:e.fromLt)||null!=(null==e?void 0:e.fromUtime)?n.oldTransactions(this._address,e).merge(n.transactions(this._address)):n.transactions(this.address)).flatMap((t=>t.transactions)).takeWhile((t=>null==e||(null==e.fromLt||c.compare(t.id.lt,e.fromLt)>0)&&(null==e.fromUtime||t.createdAt>e.fromUtime)&&(null==e.toLt||c.compare(t.id.lt,e.toLt)<0)&&(null==e.toUtime||t.createdAt<e.toUtime))).flatMap((t=>this.decodeTransactionEvents({transaction:t}).then((e=>(e.forEach((e=>e.transaction=t)),e))))).filterMap((async t=>null==i||await i(t)?t:void 0)).first();return a&&await n.unsubscribe(),r}async getPastEvents(t){const{range:e,filter:s,limit:i}=t,n="string"==typeof s?({event:t})=>t===s:s,a=[];let r=null==t?void 0:t.continuation;t:for(;;){const{transactions:t,continuation:s}=await this._provider.getTransactions({address:this._address,continuation:r});if(null===t.length)break;const o=t.filter((t=>(null==(null==e?void 0:e.fromLt)||c.compare(t.id.lt,e.fromLt)>0)&&(null==(null==e?void 0:e.fromUtime)||t.createdAt>e.fromUtime)&&(null==(null==e?void 0:e.toLt)||c.compare(t.id.lt,e.toLt)<0)&&(null==(null==e?void 0:e.toUtime)||t.createdAt<e.toUtime)));if(o.length>0){const t=await Promise.all(o.map((async t=>({tx:t,events:await this.decodeTransactionEvents({transaction:t}).then((e=>(e.forEach((e=>e.transaction=t)),e)))}))));for(let{tx:e,events:s}of t){null!=n&&(s=await Promise.all(s.map((async t=>await n(t)?t:void 0))).then((t=>t.filter((t=>null!=t))))),r=e.id;for(const t of s){if(null!=i&&a.length>=i)break t;a.push(t)}if(null!=i&&a.length>=i)break t}}if(r=s,null==r)break}return{events:a,continuation:r}}async decodeTransaction(t){await this._provider.ensureInitialized();try{const e=await this._provider.rawApi.decodeTransaction({transaction:h(t.transaction),abi:this._abi,method:t.methods});if(null==e)return;const{method:s,input:i,output:n}=e,a=this.methodsAbi[s];return{method:s,input:null!=a.inputs?g(a.inputs,i):{},output:null!=a.outputs?g(a.outputs,n):{}}}catch(t){return}}async decodeTransactionEvents(t){await this._provider.ensureInitialized();try{const{events:e}=await this._provider.rawApi.decodeTransactionEvents({transaction:h(t.transaction),abi:this._abi}),s=[];for(const{event:t,data:i}of e){const e=this.eventsAbi[t];s.push({event:t,data:null!=e.inputs?g(e.inputs,i):{}})}return s}catch(t){return[]}}async decodeInputMessage(t){await this._provider.ensureInitialized();try{const e=await this._provider.rawApi.decodeInput({abi:this._abi,body:t.body,internal:t.internal,method:t.methods});if(null==e)return;const{method:s,input:i}=e,n=this.methodsAbi[s];return{method:s,input:null!=n.inputs?g(n.inputs,i):{}}}catch(t){return}}async decodeOutputMessage(t){await this._provider.ensureInitialized();try{const e=await this._provider.rawApi.decodeOutput({abi:this._abi,body:t.body,method:t.methods});if(null==e)return;const{method:s,output:i}=e,n=this.methodsAbi[s];return{method:s,output:null!=n.outputs?g(n.outputs,i):{}}}catch(t){return}}async decodeEvent(t){await this._provider.ensureInitialized();try{const e=await this._provider.rawApi.decodeEvent({abi:this.abi,body:t.body,event:t.events});if(null==e)return;const{event:s,data:i}=e,n=this.eventsAbi[s];return{event:s,data:null!=n.inputs?g(n.inputs,i):{}}}catch(t){return}}}class M extends Error{constructor(t){super(`TvmException: ${t}`),this.code=t}}class z{constructor(t,e,s,i,n,a){this.provider=t,this.functionAbi=e,this.abi=s,this.address=i,this.method=n,this.params=v(a)}async send(t){await this.provider.ensureInitialized();const{transaction:e}=await this.provider.rawApi.sendMessage({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,bounce:null==t.bounce||t.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:t.stateInit});return p(e)}async sendDelayed(t){await this.provider.ensureInitialized();const e=new n,s=await this.provider.subscribe("messageStatusUpdated");s.on("data",(s=>{s.address.equals(t.from)&&e.fillTransaction(s.hash,s.transaction)}));const{message:i}=await this.provider.rawApi.sendMessageDelayed({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,bounce:null==t.bounce||t.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:t.stateInit}).catch((t=>{throw s.unsubscribe().catch(console.error),t})),a=e.waitTransaction(this.address,i.hash).finally((()=>s.unsubscribe().catch(console.error)));return{messageHash:i.hash,expireAt:i.expireAt,transaction:a}}async sendWithResult(t){await this.provider.ensureInitialized();let e=t.subscriber;const s=null==e;null==e&&(e=new this.provider.Subscriber);try{let s,i;const n=new Promise((t=>{i=e=>t(e)})),a=[];e.transactions(this.address).flatMap((t=>t.transactions)).filter((e=>{var s;return(null===(s=e.inMessage.src)||void 0===s?void 0:s.equals(t.from))||!1})).on((t=>{null==s?a.push(t):s.possibleMessages.findIndex((e=>e.hash==t.inMessage.hash))>=0&&(null==i||i(t))}));const r=await this.send(t),o=r.outMessages.filter((t=>{var e;return(null===(e=t.dst)||void 0===e?void 0:e.equals(this.address))||!1}));s={transaction:r,possibleMessages:o};const c=a.find((t=>o.findIndex((e=>e.hash==t.inMessage.hash))>=0));null!=c&&(null==i||i(c));const u=await n;let d;try{const t=await this.provider.rawApi.decodeTransaction({transaction:h(u),abi:this.abi,method:this.method});null!=t&&(d=null!=this.functionAbi.outputs?g(this.functionAbi.outputs,t.output):{})}catch(t){console.error(t)}return{parentTransaction:s.transaction,childTransaction:u,output:d}}finally{s&&await e.unsubscribe()}}async estimateFees(t){await this.provider.ensureInitialized();const{fees:e}=await this.provider.rawApi.estimateFees({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:t.stateInit});return e}async sendExternal(t){await this.provider.ensureInitialized();const e=!0===t.withoutSignature?this.provider.rawApi.sendUnsignedExternalMessage:this.provider.rawApi.sendExternalMessage,{transaction:s,output:i}=await e({publicKey:t.publicKey,recipient:this.address.toString(),stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},local:t.local,executorParams:t.executorParams?{disableSignatureCheck:t.executorParams.disableSignatureCheck,overrideBalance:t.executorParams.overrideBalance}:void 0});return{transaction:p(s),output:null!=i?g(this.functionAbi.outputs,i):void 0}}async sendExternalDelayed(t){await this.provider.ensureInitialized();const e=new n,s=await this.provider.subscribe("messageStatusUpdated");s.on("data",(t=>{t.address.equals(this.address)&&e.fillTransaction(t.hash,t.transaction)}));const{message:i}=await this.provider.rawApi.sendExternalMessageDelayed({publicKey:t.publicKey,recipient:this.address.toString(),stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params}}).catch((t=>{throw s.unsubscribe().catch(console.error),t})),a=e.waitTransaction(this.address,i.hash).finally((()=>s.unsubscribe().catch(console.error)));return{messageHash:i.hash,expireAt:i.expireAt,transaction:a}}async call(t={}){await this.provider.ensureInitialized();const{output:e,code:s}=await this.provider.rawApi.runLocal({address:this.address.toString(),cachedState:t.cachedState,responsible:t.responsible,functionCall:{abi:this.abi,method:this.method,params:this.params}});if(null==e||0!=s)throw new M(s);return g(this.functionAbi.outputs,e)}async executeExternal(t){await this.provider.ensureInitialized();const{transaction:e,newState:s,output:i}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:t.cachedState,stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"external",publicKey:t.publicKey,withoutSignature:t.withoutSignature},executorParams:null!=t.executorParams?{disableSignatureCheck:t.executorParams.disableSignatureCheck,overrideBalance:t.executorParams.overrideBalance}:void 0});return{transaction:p(e),newState:s,output:void 0!==i?g(this.functionAbi.outputs,i):void 0}}async executeInternal(t){await this.provider.ensureInitialized();const{transaction:e,newState:s,output:i}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:t.cachedState,stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"internal",sender:t.sender.toString(),amount:t.amount,bounce:null!=t.bounce&&t.bounce,bounced:t.bounced},executorParams:null!=t.executorParams?{disableSignatureCheck:t.executorParams.disableSignatureCheck,overrideBalance:t.executorParams.overrideBalance}:void 0});return{transaction:p(e),newState:s,output:void 0!==i?g(this.functionAbi.outputs,i):void 0}}async encodeInternal(){await this.provider.ensureInitialized();const{boc:t}=await this.provider.rawApi.encodeInternalInput({abi:this.abi,method:this.method,params:this.params});return t}}const C="undefined"!=typeof window&&void 0!==window.document;let q;q=C&&"complete"!==document.readyState?new Promise((t=>{window.addEventListener("load",(()=>{t()}))})):Promise.resolve();const F=()=>C?window.__ever||window.ton:void 0;async function O(){return!!C&&(await q,!0===window.__hasEverscaleProvider||!0===window.hasTonProvider)}class D extends Error{constructor(){super("Everscale provider was not found")}}class j extends Error{constructor(){super("Everscale provider was not initialized yet")}}function L(t,e){const s={state:!1,transactions:!1},i=Object.assign({},s);for(const n of t){if(i.transactions&&i.state)break;s.state||(s.state=n.state),s.transactions||(s.transactions=n.transactions),n!==e&&(i.state||(i.state=n.state),i.transactions||(i.transactions=n.transactions))}return{total:s,withoutExcluded:i}}return t.Address=e,t.AddressLiteral=class extends e{constructor(t){super(t)}},t.Contract=E,t.LT_COLLATOR=c,t.MessageExpiredException=i,t.ProviderNotFoundException=D,t.ProviderNotInitializedException=j,t.ProviderRpcClient=class{constructor(t={}){this._subscriptions={connected:new Map,disconnected:new Map,transactionsFound:new Map,contractStateChanged:new Map,messageStatusUpdated:new Map,networkChanged:new Map,permissionsChanged:new Map,loggedOut:new Map},this._contractSubscriptions=new Map,this._properties=t;const e=this;this.Contract=class extends E{constructor(t,s){super(e,t,s)}};this.Subscriber=class extends S{constructor(){super(e)}},this._api=new Proxy({},{get:(t,e)=>t=>{if(null!=this._provider)return this._provider.request({method:e,params:t});throw new j}}),!0===t.forceUseFallback?this._initializationPromise=null!=t.fallback?t.fallback().then((t=>{this._provider=t})):Promise.resolve():(this._provider=F(),null!=this._provider?this._initializationPromise=Promise.resolve():this._initializationPromise=O().then((t=>new Promise((e=>{if(!t)return e();if(this._provider=F(),null!=this._provider)e();else{const t=!0===window.__hasEverscaleProvider?"ever#initialized":"ton#initialized";window.addEventListener(t,(t=>{this._provider=F(),e()}))}})))).then((async()=>{null==this._provider&&null!=t.fallback&&(this._provider=await t.fallback())}))),this._initializationPromise.then((()=>{null!=this._provider&&this._registerEventHandlers(this._provider)}))}async hasProvider(){return null!=this._properties.fallback||O()}async ensureInitialized(){if(await this._initializationPromise,null==this._provider)throw new D}get isInitialized(){return null!=this._provider}get raw(){if(null!=this._provider)return this._provider;throw new j}get rawApi(){return this._api}createContract(t,e){return new this.Contract(t,e)}createSubscriber(){return new this.Subscriber}async requestPermissions(t){await this.ensureInitialized();return b(await this._api.requestPermissions({permissions:t.permissions}))}async changeAccount(){await this.ensureInitialized(),await this._api.changeAccount()}async disconnect(){await this.ensureInitialized(),await this._api.disconnect()}async subscribe(t,e){class s{constructor(t,e){this._subscribe=t,this._unsubscribe=e,this._listeners={data:[],subscribed:[],unsubscribed:[]},this._subscribed=!1,this.subscribe=async()=>{if(!this._subscribed){this._subscribed=!0,await this._subscribe(this);for(const t of this._listeners.subscribed)t()}},this.unsubscribe=async()=>{if(this._subscribed){this._subscribed=!1,await this._unsubscribe();for(const t of this._listeners.unsubscribed)t()}}}on(t,e){return this._listeners[t].push(e),this}notify(t){for(const e of this._listeners.data)e(t)}}const i=this._subscriptions[t],n=l();switch(t){case"connected":case"disconnected":case"messageStatusUpdated":case"networkChanged":case"permissionsChanged":case"loggedOut":{const t=new s((async t=>{i.has(n)||i.set(n,(e=>{t.notify(e)}))}),(async()=>{i.delete(n)}));return await t.subscribe(),t}case"transactionsFound":case"contractStateChanged":{if(null==e)throw new Error("Address must be specified for the subscription");await this.ensureInitialized();const a=e.address.toString(),r=new s((async e=>{if(i.has(n))return;i.set(n,(t=>{t.address.toString()===a&&e.notify(t)}));let s=this._contractSubscriptions.get(a);null==s&&(s=new Map,this._contractSubscriptions.set(a,s));const r={state:"contractStateChanged"===t,transactions:"transactionsFound"===t};s.set(n,r);const{total:o,withoutExcluded:c}=L(s.values(),r);try{o.transactions===c.transactions&&o.state===c.state||await this.rawApi.subscribe({address:a,subscriptions:o})}catch(t){throw i.delete(n),s.delete(n),t}}),(async()=>{i.delete(n);const t=this._contractSubscriptions.get(a);if(null==t)return;const e=t.get(n),{total:s,withoutExcluded:r}=L(t.values(),e);t.delete(n),r.transactions||r.state?s.transactions===r.transactions&&s.state===r.state||await this.rawApi.subscribe({address:a,subscriptions:r}):await this.rawApi.unsubscribe({address:a})}));return await r.subscribe(),r}default:throw new Error(`Unknown event ${t}`)}}async getProviderState(){await this.ensureInitialized();const t=await this._api.getProviderState();return{...t,permissions:b(t.permissions)}}async getBalance(t){const{state:e}=await this.getFullContractState({address:t});return null==e?"0":null==e?void 0:e.balance}async getFullContractState(t){return await this.ensureInitialized(),await this._api.getFullContractState({address:t.address.toString()})}async computeStorageFee(t){return await this.ensureInitialized(),await this._api.computeStorageFee({state:{boc:t.state.boc,balance:t.state.balance,genTimings:{...t.state.genTimings},lastTransactionId:null!=t.state.lastTransactionId?{...t.state.lastTransactionId}:void 0,isDeployed:t.state.isDeployed,codeHash:t.state.codeHash},masterchain:t.masterchain,timestamp:t.timestamp})}async getAccountsByCodeHash(t){await this.ensureInitialized();const{accounts:s,continuation:i}=await this._api.getAccountsByCodeHash({...t});return{accounts:s.map((t=>new e(t))),continuation:i}}async getTransactions(t){await this.ensureInitialized();const{transactions:e,continuation:s,info:i}=await this._api.getTransactions({...t,address:t.address.toString()});return{transactions:e.map(p),continuation:s,info:i}}async getTransaction(t){await this.ensureInitialized();const{transaction:e}=await this._api.getTransaction({...t});return{transaction:e?p(e):void 0}}async getExpectedAddress(t,e){const{address:s}=await this.getStateInit(t,e);return s}async getStateInit(t,s){await this.ensureInitialized();const{address:i,stateInit:n,hash:a}=await this._api.getExpectedAddress({abi:JSON.stringify(t),...s,initParams:v(s.initParams)});return{address:new e(i),stateInit:n,hash:a}}async unpackInitData(t,e){await this.ensureInitialized();const{publicKey:s,initParams:i}=await this._api.unpackInitData({abi:JSON.stringify(t),data:e});return{publicKey:s,initParams:_(t.data,i)}}async getBocHash(t){return await this.ensureInitialized(),await this._api.getBocHash({boc:t}).then((({hash:t})=>t))}async packIntoCell(t){return await this.ensureInitialized(),await this._api.packIntoCell({abiVersion:t.abiVersion,structure:t.structure,data:v(t.data)})}async unpackFromCell(t){await this.ensureInitialized();const{data:e}=await this._api.unpackFromCell({...t,structure:t.structure});return{data:g(t.structure,e)}}async extractPublicKey(t){await this.ensureInitialized();const{publicKey:e}=await this._api.extractPublicKey({boc:t});return e}async codeToTvc(t){await this.ensureInitialized();const{tvc:e}=await this._api.codeToTvc({code:t});return e}async mergeTvc(t){return await this.ensureInitialized(),await this._api.mergeTvc(t)}async splitTvc(t){return await this.ensureInitialized(),await this._api.splitTvc({tvc:t})}async setCodeSalt(t){let e;if("string"==typeof t.salt)await this.ensureInitialized(),e=t.salt;else{const{boc:s}=await this.packIntoCell(t.salt);e=s}return await this._api.setCodeSalt({code:t.code,salt:e})}async getCodeSalt(t){await this.ensureInitialized();const{salt:e}=await this.rawApi.getCodeSalt({code:t.code});return e}async addAsset(t){let e;if(await this.ensureInitialized(),"tip3_token"!==t.type)throw new Error("Unknown asset type");return e={rootContract:t.params.rootContract.toString()},await this._api.addAsset({account:t.account.toString(),type:t.type,params:e})}async verifySignature(t){return await this.ensureInitialized(),await this._api.verifySignature(t)}async signData(t){return await this.ensureInitialized(),await this._api.signData(t)}async signDataRaw(t){return await this.ensureInitialized(),await this._api.signDataRaw(t)}async encryptData(t){await this.ensureInitialized();const{encryptedData:e}=await this._api.encryptData(t);return e}async decryptData(t){await this.ensureInitialized();const{data:e}=await this._api.decryptData({encryptedData:t});return e}async sendMessage(t){await this.ensureInitialized();const{transaction:e}=await this._api.sendMessage({sender:t.sender.toString(),recipient:t.recipient.toString(),amount:t.amount,bounce:t.bounce,payload:t.payload?{abi:t.payload.abi,method:t.payload.method,params:v(t.payload.params)}:void 0,stateInit:t.stateInit});return{transaction:p(e)}}async sendMessageDelayed(t){await this.ensureInitialized();const e=new n,s=await this.subscribe("messageStatusUpdated");s.on("data",(s=>{s.address.equals(t.sender)&&e.fillTransaction(s.hash,s.transaction)}));const{message:i}=await this._api.sendMessageDelayed({sender:t.sender.toString(),recipient:t.recipient.toString(),amount:t.amount,bounce:t.bounce,payload:t.payload?{abi:t.payload.abi,method:t.payload.method,params:v(t.payload.params)}:void 0,stateInit:t.stateInit}).catch((t=>{throw s.unsubscribe().catch(console.error),t})),a=e.waitTransaction(t.sender,i.hash).finally((()=>s.unsubscribe().catch(console.error)));return{messageHash:i.hash,expireAt:i.expireAt,transaction:a}}_registerEventHandlers(t){const s={connected:t=>t,disconnected:t=>t,transactionsFound:t=>({address:new e(t.address),transactions:t.transactions.map(p),info:t.info}),contractStateChanged:t=>({address:new e(t.address),state:t.state}),messageStatusUpdated:t=>({address:new e(t.address),hash:t.hash,transaction:null!=t.transaction?p(t.transaction):void 0}),networkChanged:t=>t,permissionsChanged:t=>({permissions:b(t.permissions)}),loggedOut:t=>t};for(const[e,i]of Object.entries(s))t.addListener(e,(t=>{const s=this._subscriptions[e],n=i(t);for(const t of s.values())t(n)}))}},t.Subscriber=S,t.TvmException=M,t.hasEverscaleProvider=O,t.isAddressObject=s,t.mergeTransactions=function(t,e,s){if("old"===s.batchType)return t.push(...e),t;if(0===t.length)return t.push(...e),t;let i=0;for(;i<t.length&&c.compare(t[i].id.lt,s.maxLt)>=0;)++i;return t.splice(i,0,...e),t},t.parseAccountInteraction=f,t.parseMessage=w,t.parsePartialTokensObject=_,t.parsePermissions=b,t.parseTokensObject=g,t.parseTransaction=p,t.serializeMessage=m,t.serializeTokensObject=v,t.serializeTransaction=h,t}({});

    createApp({
      data() {
        return {
          walletData: {
            address: null,
            balance: null
          },
          fastOptions: ["50", "100", "500", "OTHER"],
          inputDonate: null,
          donateFast: null,
          everProvider: null,
          pendingTx: false,
          isError: false,
          txResult: null,
          pageLoading: true,
          permissionData: null
        }
      },
      async mounted() {
        console.log(window, '---window')
        await new Promise((res) => setTimeout(res, 500));
        this.pageLoading = false
      },
      watch: {
        async permissionData(val) {
          if (!val) return;

          this.connectWallet(val);
        },
      },
      computed: {
        isNoValue() {
          const isZeroInput = this.inputDonate ? parseInt(this.inputDonate) === 0 : true;
          const isOptionChoosen = this.donateFast ? parseInt(this.donateFast) > 0 : false;

          if (!this.walletData.balance) return true;

          if (isZeroInput && !isOptionChoosen) return true;

          const enoughInputBalance = !isZeroInput ?
            Number(this.walletData.balance) > Number(this.inputDonate)
            : false

          const enoughForFastBalance = isOptionChoosen ?
            Number(this.walletData.balance) > parseInt(this.donateFast)
            : false

          if (!enoughInputBalance && !enoughForFastBalance) return true;

          return false;
        }
      },
      methods: {
        handleFastOption(val) {
          this.donateFast = val;
        },
        async triggerDonate() {
          const RECEIVER = "0:c10cbc83913a6066ff7d37a0c7224ac9b3b2269fbe36b0e699d9c57893faffa3"

          try {
            this.pendingTx = true;
            const amountForm = this.donateFast === "OTHER" ? this.inputDonate : this.donateFast

            const { transaction } = await this.everProvider.sendMessage({
              sender: this.walletData.address,
              recipient: RECEIVER,
              amount: (Number(amountForm) * 10 ** 9).toString(), // 1 Native coin
              bounce: false,
              payload: "",
            });

            console.log(transaction, '---transaction');
            
            this.txResult = transaction;
            this.pendingTx = false;
            this.donateFast = null;
            this.inputDonate = null;
            this.updateData();
          } catch(e) {
            this.pendingTx = false;
            this.donateFast = null;
            this.inputDonate = null;
            this.isError = true;
          }
        },
        clearTx() {
          this.txResult = null;
          this.isError = false;
        },
        async triggerLogout() {
          this.walletData = {
            address: null,
            balance: null
          };
          this.permissionData = null;
          this.everProvider.disconnect();
        },
        cutString(str, takeFirst, takeLast) {
          if (!str || str.length <= takeFirst + takeLast) {
            return str;
          }

          return (
            str.substring(0, takeFirst) +
            "..." +
            str.substring(str.length - takeLast, str.length)
          );
        },

        async updateData() {
          if (!this.everProvider) return;
          const balance = await this.everProvider.getBalance(accountInteraction.address.toString());
        },
        roundDown(number, decimals) {
          decimals = decimals || 0;
          return ( Math.floor( number * Math.pow(10, decimals) ) / Math.pow(10, decimals) );
        },
        async connectWallet(permissionData) {
          const ever = new EverscaleProvider.ProviderRpcClient();
          const balance = await ever.getBalance(permissionData.address.toString());

          this.walletData.address = permissionData.address.toString();
          this.walletData.balance = this.roundDown(Number(balance) / 10 ** 9, 2);
          this.everProvider = ever;
        },
        async initPermission() {
          const ever = new EverscaleProvider.ProviderRpcClient();
          const hasProvider = await ever.hasProvider();

          if (!(await ever.hasProvider())) {
            throw new Error('Extension is not installed');
          }
          await ever.ensureInitialized();
          const { accountInteraction } = await ever.requestPermissions({
            permissions: ['basic', 'accountInteraction'],
          });

          this.permissionData = accountInteraction
        },
      }
    }).mount('#app')
  </script>
</body>

</html>